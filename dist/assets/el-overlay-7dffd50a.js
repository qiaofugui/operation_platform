import{W as K,aO as U,a0 as D,bV as j,D as A,aM as E,a2 as O,bW as G,bX as Q,aK as X,bY as J,aL as R,br as h,b as w,d as k,a as ee,y as oe,q as S,aQ as te,i as le,ab as F,aV as ne,bI as ae,aA as I,r as v,bZ as se,b_ as ue,c as P,a1 as ce,an as de,o as ie,a7 as re,A as T}from"./index-36d7dce8.js";import{P as x}from"./vnode-612af2fe.js";const fe=(e,o={})=>{K(e)||U("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||D("popup"),t=j(()=>u.bm("parent","hidden"));if(!A||E(document.body,t.value))return;let c=0,s=!1,l="0";const i=()=>{setTimeout(()=>{R(document==null?void 0:document.body,t.value),s&&document&&(document.body.style.width=l)},200)};O(e,a=>{if(!a){i();return}s=!E(document.body,t.value),s&&(l=document.body.style.width),c=G(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,r=Q(document.body,"overflowY");c>0&&(f||r==="scroll")&&s&&(document.body.style.width=`calc(100% - ${c}px)`),X(document.body,t.value)}),J(()=>i())},ye=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:l=>{o&&u&&e(l),o=u=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{u=l.target===l.currentTarget}}},me=w({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ve={click:e=>e instanceof MouseEvent},pe="overlay";var be=ee({name:"ElOverlay",props:me,emits:ve,setup(e,{slots:o,emit:u}){const t=D(pe),c=a=>{u("click",a)},{onClick:s,onMousedown:l,onMouseup:i}=ye(e.customMaskEvent?void 0:c);return()=>e.mask?oe("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:l,onMouseup:i},[S(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}});const xe=be,Ce=w({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:le},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Oe={close:()=>!0},ke=w({...Ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:k(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),we={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Be=(e,o)=>{const t=re().emit,{nextZIndex:c}=ae();let s="";const l=I(),i=I(),a=v(!1),f=v(!1),r=v(!1),p=v(e.zIndex||c());let y,m;const N=se("namespace",ue),z=P(()=>{const n={},d=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(n[`${d}-margin-top`]=e.top),e.width&&(n[`${d}-width`]=ce(e.width))),n}),L=P(()=>e.alignCenter?{display:"flex"}:{});function V(){t("opened")}function W(){t("closed"),t(F,!1),e.destroyOnClose&&(r.value=!1)}function Y(){t("close")}function B(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=T(()=>M(),e.openDelay):M()}function b(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=T(()=>g(),e.closeDelay):g()}function C(){function n(d){d||(f.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(n):b()}function $(){e.closeOnClickModal&&C()}function M(){A&&(a.value=!0)}function g(){a.value=!1}function H(){t("openAutoFocus")}function _(){t("closeAutoFocus")}function Z(n){var d;((d=n.detail)==null?void 0:d.focusReason)==="pointer"&&n.preventDefault()}e.lockScroll&&fe(a);function q(){e.closeOnPressEscape&&C()}return O(()=>e.modelValue,n=>{n?(f.value=!1,B(),r.value=!0,p.value=e.zIndex?p.value++:c(),de(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):a.value&&b()}),O(()=>e.fullscreen,n=>{o.value&&(n?(s=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=s)}),ie(()=>{e.modelValue&&(a.value=!0,r.value=!0,B())}),{afterEnter:V,afterLeave:W,beforeLeave:Y,handleClose:C,onModalClick:$,close:b,doClose:g,onOpenAutoFocus:H,onCloseAutoFocus:_,onCloseRequested:q,onFocusoutPrevented:Z,titleId:l,bodyId:i,closed:f,style:z,overlayDialogStyle:L,rendered:r,visible:a,zIndex:p}};export{xe as E,Oe as a,ke as b,we as c,Ce as d,ye as e,Be as u};
